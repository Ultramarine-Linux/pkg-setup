diff -urNp setup-2.7.4-orig/bashrc setup-2.7.4/bashrc
--- setup-2.7.4-orig/bashrc	2008-10-10 18:29:39.000000000 +0200
+++ setup-2.7.4/bashrc	2008-11-14 09:37:24.000000000 +0100
@@ -49,14 +49,18 @@ if ! shopt -q login_shell ; then # We're
 		fi
 	}
 
-	# Only run profile.d scripts if we are no login shell and interactive
-	if [ "$PS1" ]; then
-		for i in /etc/profile.d/*.sh; do
-			if [ -r "$i" ]; then
+	# Only display echos from profile.d scripts if we are no login shell
+    # and interactive - otherwise just process them to set envvars
+	for i in /etc/profile.d/*.sh; do
+		if [ -r "$i" ]; then
+			if [ "$PS1" ]; then
 				. $i
+			else
+				. $i &>/dev/null
 			fi
-		done
-	fi
+		fi
+	done
+
 	unset i
 	unset pathmunge
 fi
diff -urNp setup-2.7.4-orig/csh.cshrc setup-2.7.4/csh.cshrc
--- setup-2.7.4-orig/csh.cshrc	2008-10-10 18:29:39.000000000 +0200
+++ setup-2.7.4/csh.cshrc	2008-11-14 11:57:12.000000000 +0100
@@ -13,7 +13,7 @@ endif
 if ($?prompt) then
   if ($?tcsh) then
     set promptchars='$#'
-    set prompt='[%u@%m %c]%# ' 
+    set prompt='[%n@%m %c]%# ' 
     # make completion work better by default
     set autolist
   else
@@ -54,15 +54,17 @@ limit coredumpsize 0
 
 # Check if we aren't a loginshell and do stuff if we aren't
 if (! $?loginsh) then
-	if ($?prompt) then
-		if ( -d /etc/profile.d ) then
-	        	set nonomatch
-		        foreach i ( /etc/profile.d/*.csh )
-		                if ( -r $i ) then
-		                        source $i
-		                endif
-		        end
-		        unset i nonomatch
-		endif
-	endif
+    if ( -d /etc/profile.d ) then
+        set nonomatch
+        foreach i ( /etc/profile.d/*.csh )
+            if ( -r $i ) then
+                if ($?prompt) then
+                    source $i
+                else
+                    source $i >&/dev/null
+                endif
+            endif
+        end
+        unset i nonomatch
+    endif
 endif
diff -urNp setup-2.7.4-orig/csh.login setup-2.7.4/csh.login
--- setup-2.7.4-orig/csh.login	2008-10-10 18:29:39.000000000 +0200
+++ setup-2.7.4/csh.login	2008-11-14 09:49:42.000000000 +0100
@@ -21,14 +21,16 @@ if ( ! -f $HOME/.inputrc ) then
 	setenv INPUTRC /etc/inputrc
 endif
 
-if ($?prompt) then
-	if ( -d /etc/profile.d ) then
-	        set nonomatch
-	        foreach i ( /etc/profile.d/*.csh )
-	                if ( -r $i ) then
-	                        source $i
-	                endif
-	        end
-	        unset i nonomatch
-	endif
+if ( -d /etc/profile.d ) then
+        set nonomatch
+        foreach i ( /etc/profile.d/*.csh )
+                if ( -r $i ) then
+	                        if ($?prompt) then
+	                              source $i
+	                        else
+	                              source $i >& /dev/null
+	                        endif
+                endif
+        end
+        unset i nonomatch
 endif
diff -urNp setup-2.7.4-orig/profile setup-2.7.4/profile
--- setup-2.7.4-orig/profile	2008-10-10 18:29:39.000000000 +0200
+++ setup-2.7.4/profile	2008-11-14 12:07:36.000000000 +0100
@@ -39,7 +39,7 @@ if [ -x /usr/bin/id ]; then
 	MAIL="/var/spool/mail/$USER"
 fi
 
-HOSTNAME=`/bin/hostname`
+HOSTNAME=`/bin/hostname 2>/dev/null`
 HISTSIZE=1000
 
 if [ -z "$INPUTRC" -a ! -f "$HOME/.inputrc" ]; then
@@ -50,9 +50,15 @@ export PATH USER LOGNAME MAIL HOSTNAME H
 
 for i in /etc/profile.d/*.sh ; do
     if [ -r "$i" ]; then
-    	. $i
+        if [ "$PS1" ]; then
+            . $i
+        else
+            . $i &>/dev/null
+        fi
     fi
 done
 
+export PATH
+
 unset i
 unset pathmunge
diff -urNp setup-2.7.4-orig/services setup-2.7.4/services
--- setup-2.7.4-orig/services	2008-10-10 18:29:39.000000000 +0200
+++ setup-2.7.4/services	2008-11-14 11:55:48.000000000 +0100
@@ -246,6 +246,8 @@ phonebook	767/tcp				# Network phonebook
 phonebook	767/udp
 rsync		873/tcp				# rsync
 rsync		873/udp				# rsync
+rquotad  875/tcp      # rquota daemon
+rquotad  875/udp      # rquota daemon
 telnets		992/tcp
 telnets		992/udp
 imaps	 	993/tcp				# IMAP over SSL
diff -urNp setup-2.7.4-orig/uidgid setup-2.7.4/uidgid
--- setup-2.7.4-orig/uidgid	2008-10-10 18:29:39.000000000 +0200
+++ setup-2.7.4/uidgid	2008-11-18 10:58:44.000000000 +0100
@@ -39,6 +39,7 @@ netdump		34	34	/var/crash		/bin/bash	net
 utempter	-	35	-			-		libutempter
 rpm		37	37	/var/lib/rpm		/bin/bash	rpm
 ntp		38	38	/etc/ntp		/sbin/nologin	ntp
+video		-	39	-			-
 dip		-	40      -			-		setup
 mailman		41	41	/var/mailman		/bin/false	mailman
 gdm		42	42	/var/gdm		/bin/bash	gdm
@@ -50,6 +51,7 @@ mailnull	47	47	/var/spool/mqueue	/dev/nu
 apache		48	48	/var/www		/bin/false	apache
 wnn		49	49	/home/wnn		/bin/bash	FreeWnn
 smmsp		51	51	/var/spool/mqueue	/dev/null	sendmail
+puppet		52	52	/var/lib/puppet		/sbin/nologin	puppet
 tomcat	        53	53	/var/lib/tomcat		/sbin/nologin	tomcat
 lock		-	54	-			-		lockdev
 ldap		55	55	/var/lib/ldap		/bin/false	openldap-servers
@@ -60,6 +62,7 @@ tss		59	59	-			/sbin/nologin	trousers
 piranha		60	60	/etc/sysconfig/ha	/dev/null	piranha
 prelude-manager	61	61	-			/sbin/nologin	prelude-manager
 snortd		62	62	-			/sbin/nologin	snortd
+audio		-	63	-			-
 condor		64	64	/var/lib/condor		/sbin/nologin	condord
 wine		-	66	-			-		wine
 pegasus		66	65	/var/lib/Pegasus	/sbin/nologin	tog-pegasus
@@ -83,7 +86,7 @@ jonas		82	82	/var/lib/jonas		/sbin/nolog
 clamav		83	83	/tmp			/sbin/nologin	clamav
 screen		-	84	-			-		screen
 quaggavt	-	85	-			-		quagga
-sabayon 	86	86	-			/sbin/nologin	sabayon
+sabayon		86	86	-			/sbin/nologin	sabayon
 polkituser	87	-	/			/sbin/nologin	PolicyKit
 wbpriv		-	88	-			-		samba-common
 postfix		89	89	/var/spool/postfix	/bin/true	postfix
